@page
@model LoginModel
@{
    ViewData["Title"] = "Log in";
    var googleEnabled = Model.ExternalLogins?.Any(scheme =>
        string.Equals(scheme.Name, "Google", StringComparison.OrdinalIgnoreCase)) ?? false;
}

<section class="ejc-auth ejc-auth-login">
    <div class="ejc-auth-card">
        <div class="ejc-auth-form">
            <div class="ejc-auth-brand">
                <div>
                    <span class="ejc-eyebrow">Welcome back</span>
                    <h1 class="h2 mb-1">Log in to EJC Fitness</h1>
                    <p class="ejc-muted mb-0">Access your membership, sessions, and billing.</p>
                </div>
            </div>

            <form id="account" method="post" asp-route-returnUrl="@Model.ReturnUrl">
                <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
                <div class="form-floating mb-3 ejc-auth-input">
                    <input asp-for="Input.Email" class="form-control" autocomplete="username" aria-required="true" placeholder="name@example.com" />
                    <label asp-for="Input.Email">Email address</label>
                    <span asp-validation-for="Input.Email" class="text-danger"></span>
                </div>
                <div class="form-floating mb-2 ejc-auth-input ejc-password-field">
                    <input asp-for="Input.Password" class="form-control" autocomplete="current-password" aria-required="true" placeholder="Password" />
                    <label asp-for="Input.Password">Password</label>
                    <button type="button" class="btn btn-outline-light ejc-password-toggle" data-password-toggle aria-label="Show password">
                        <i class="bi bi-eye"></i>
                    </button>
                    <span asp-validation-for="Input.Password" class="text-danger"></span>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-4 flex-wrap gap-2 ejc-auth-remember-row">
                    <div class="form-check mb-0">
                        <input class="form-check-input" asp-for="Input.RememberMe" />
                        <label class="form-check-label" asp-for="Input.RememberMe"></label>
                    </div>
                    <a asp-page="./ForgotPassword" class="ejc-auth-link">Forgot password?</a>
                </div>
                <button type="submit" class="btn btn-primary w-100 ejc-auth-submit">Log in</button>
                <div class="ejc-auth-links">
                    <a asp-page="./Register" asp-route-returnUrl="@Model.ReturnUrl">Create account</a>
                    <a asp-page="./ResendEmailConfirmation" asp-route-email="@Model.Input.Email">Resend email confirmation</a>
                </div>
                <div class="ejc-auth-links">
                    <span class="ejc-muted">Looking for plans?</span>
                    <a asp-area="" asp-page="/Public/Pricing">View memberships</a>
                </div>
            </form>

            <div class="ejc-auth-divider"><span>or</span></div>
            <form id="external-account" asp-page="./ExternalLogin" asp-route-returnUrl="@Model.ReturnUrl" method="post">
                <div class="ejc-auth-external">
                    @if (googleEnabled)
                    {
                        <button type="submit" class="btn btn-outline-light ejc-auth-provider-btn ejc-auth-provider-google" name="provider" value="Google">
                            <span class="ejc-google-icon" aria-hidden="true">
                                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" focusable="false">
                                    <path d="M21.35 11.1H12v2.9h5.38c-.23 1.48-1.76 4.33-5.38 4.33-3.24 0-5.88-2.68-5.88-5.98s2.64-5.98 5.88-5.98c1.85 0 3.09.79 3.8 1.47l2.58-2.5C16.73 3.8 14.61 3 12 3 7.03 3 3 7.03 3 12s4.03 9 9 9c5.19 0 8.62-3.64 8.62-8.76 0-.59-.06-1.04-.27-1.14z" fill="#FFC107" />
                                    <path d="M4.04 7.77l2.38 1.75C7.06 8.18 8.41 7 10 7c1.04 0 1.98.36 2.74 1.08l2.04-1.97C13.57 4.98 11.91 4.2 10 4.2c-2.9 0-5.4 1.65-6.66 4.06z" fill="#FF3D00" />
                                    <path d="M10 20.8c1.85 0 3.41-.61 4.55-1.66l-2.1-1.72c-.57.4-1.31.68-2.45.68-2.3 0-4.26-1.56-4.96-3.65L2.6 16.3C3.83 18.79 6.67 20.8 10 20.8z" fill="#4CAF50" />
                                    <path d="M20.55 12.04c0-.54-.05-1.04-.16-1.54H10v2.95h5.98c-.25 1.35-1.01 2.49-2.14 3.25l2.09 1.71c1.91-1.77 3.02-4.37 3.02-7.37z" fill="#1976D2" />
                                </svg>
                            </span>
                            <span>Sign in with Google</span>
                        </button>
                    }
                    else
                    {
                        <button type="button" class="btn btn-outline-light ejc-auth-provider-btn ejc-auth-provider-google is-disabled" disabled aria-disabled="true">
                            <span class="ejc-google-icon" aria-hidden="true">
                                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" focusable="false">
                                    <path d="M21.35 11.1H12v2.9h5.38c-.23 1.48-1.76 4.33-5.38 4.33-3.24 0-5.88-2.68-5.88-5.98s2.64-5.98 5.88-5.98c1.85 0 3.09.79 3.8 1.47l2.58-2.5C16.73 3.8 14.61 3 12 3 7.03 3 3 7.03 3 12s4.03 9 9 9c5.19 0 8.62-3.64 8.62-8.76 0-.59-.06-1.04-.27-1.14z" fill="#FFC107" />
                                    <path d="M4.04 7.77l2.38 1.75C7.06 8.18 8.41 7 10 7c1.04 0 1.98.36 2.74 1.08l2.04-1.97C13.57 4.98 11.91 4.2 10 4.2c-2.9 0-5.4 1.65-6.66 4.06z" fill="#FF3D00" />
                                    <path d="M10 20.8c1.85 0 3.41-.61 4.55-1.66l-2.1-1.72c-.57.4-1.31.68-2.45.68-2.3 0-4.26-1.56-4.96-3.65L2.6 16.3C3.83 18.79 6.67 20.8 10 20.8z" fill="#4CAF50" />
                                    <path d="M20.55 12.04c0-.54-.05-1.04-.16-1.54H10v2.95h5.98c-.25 1.35-1.01 2.49-2.14 3.25l2.09 1.71c1.91-1.77 3.02-4.37 3.02-7.37z" fill="#1976D2" />
                                </svg>
                            </span>
                            <span>Sign in with Google</span>
                        </button>
                    }
                </div>
            </form>
        </div>
        <div class="ejc-auth-aside">
            <span class="ejc-eyebrow">Performance portal</span>
            <h2 class="h3 mt-2">Stronger every session</h2>
            <p class="ejc-muted">Log in to plan training, book classes, and keep your progress on track.</p>
            <ul class="ejc-auth-list">
                <li><i class="bi bi-check2"></i><span>Class scheduling with smart reminders</span></li>
                <li><i class="bi bi-check2"></i><span>Membership status and renewal alerts</span></li>
                <li><i class="bi bi-check2"></i><span>Invoices and payment history in one place</span></li>
            </ul>
        </div>
    </div>
</section>
